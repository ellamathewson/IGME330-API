<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<title>Firebase Admin</title>
</head>

<body>
   

    
    <!-- #1 - link to Firebase goes here  -->
    <script src="https://www.gstatic.com/firebasejs/5.10.0/firebase.js"></script>
    
    <div id="app">
            <div class="container">
                <h1>{{title}}</h1>
                <ul id="geo data">
                    <h2>Moon Distance</h2>
                    <li v-for="(item, index) of Object.keys(database)" v-if="index < indexNum">{{database[item].moon_distance}}</li>
                    <h2>Sun Distance</h2>
                    <li v-for="item in database">{{item.sun_distance}}</li>
                </ul>
            </div>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  
  <!--Put after vue.js-->
  <script src="https://unpkg.com/@babel/polyfill@latest/dist/polyfill.min.js"></script>
  <script src="https://unpkg.com/vue@latest/dist/vue.min.js"></script>
  <script src="https://unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.js"></script>
  

<script>

    const app = new Vue({
        el: '#app',
        data: {
            database:{ },
            title:"GeoData",
            indexNum: 9
        },
        created(){
             /* #2 - The rest of the Firebase setup code goes here */
             var config = {
                apiKey: "AIzaSyAibUl8D6kTXGhxO8xcCocygjRbyo712Wk",
                authDomain: "starfinder-7daeb.firebaseapp.com",
                databaseURL: "https://starfinder-7daeb.firebaseio.com",
                projectId: "starfinder-7daeb",
                storageBucket: "starfinder-7daeb.appspot.com",
                messagingSenderId: "252674911376"
            };
             firebase.initializeApp(config);
             //console.log(firebase); // #3 - make sure firebase is loaded
                       
             // #4 This is where the magic happens!
             //this.database = firebase.database().ref("geoLocations").on("value", dataChanged, firebaseError);
             /*
             let ref = firebase.database().ref("geoLocations");                                            
             function dataChanged(data){
               console.log(data.val());                 
               }
         
             function firebaseError(error){
               console.log(error);
             }
             */
             //this.search();
        },
        methods:{
            search(){
                firebase.database().ref("geoLocations").once("value").then(function(data){
                    console.log(data.val());
                    this.database = (data.val());

                 }.bind(app));
            }
        }
    }); 

    app.search();          
</script>



  




</body>

</html>